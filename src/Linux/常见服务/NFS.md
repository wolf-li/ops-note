# NFS(network file system)

网络文件系统（Network file system）协议允许用户在不同计算机之间进行文件共享。对于用户而言 NFS 接近于透明，如果 NFS 服务器崩溃，你也不会丢失什么信息。客户端只需要等待服务器重新上线。
目标：对存储在远程系统磁盘上的文件后目录授予共享访问权限。用户应用程序必须能够使用和本地文件相同的系统调用读写远程文件，应用程序不需要知道这些文件在网络上的位置。如果多个网络客户端货应用程序试图修改某个文件，文件共享服务必须解决由此产生的冲突。

## NFS在企业应用架构

在企业集群架构的⼯作场景中，NFS⽹络⽂件系统⼀般被⽤来存储共享视 频、图⽚、静态⽂件，通常⽹站⽤户上传的⽂件也都会放在NFS共享⾥， 例如BBS产品(论坛)产⽣的图⽚、附件、头像等，然后前端所有的节点访问静态资源时都会读取NFS存储上的资源。
阿⾥云等公有云平台的NAS就是云版的NFS服务应⽤。
NFS作为所有前端服务 的共享存储，存储内容包括⽤户上传的图⽚，附件，头像等，注意⽹站后 端代码等重要数据不得放在NFS共享。
kubernetes 共享文件使用

## NFS 协议版本与历史

NFS协议第一个公开版本是 1989年的第2版，NFS版本3可以追溯到 20世纪 90年代早期，该版本通过允许异步写入到一致性方案消除了性能瓶颈。还修改了其他影响性能的问题。改进了大文件处理，相较于 NFSv2 ，NFSv3 快的多。2003年NFSv4出现，10年后才广泛使用，增强特性有：
* 实现了与防火墙和 NAT 设备的兼容和互相操作
* 在核心 NFS 协议中集成了加锁和挂载协议
* 状态化操作
* 强大的模块安全
* 支持复制和迁移
* 支持 UNIX 和 Windows 客户端
* 访问控制列表（ACL）
* 支持 Unicode 文件名
* 低带宽上也可以有很好的性能表现
不同版本的 NFS 协议无法相互通信，但 NFS 服务器通常实现了所有 3 个协议版本，在实践中，NFS客户端和服务器的所有组合都可以与某些版本的协议实现互操作。NFS 相关 RFC（RFC 1094、RFC 1813、 RFC 7530）

## 工作原理

