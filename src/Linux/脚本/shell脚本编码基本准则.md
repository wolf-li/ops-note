<!--
 * @Author: wolf-li
 * @Date: 2024-11-02 11:10:37
 * @LastEditTime: 2024-11-02 11:43:40
 * @LastEditors: wolf-li
 * @Description: 
 * @FilePath: /note/src/Linux/脚本/shell脚本编码基本准则.md
 * talk is cheep show me your code.
-->
# shell 脚本编码基本准则

* 如果运行时脚本参数有问题，脚本应该打印出用法信息并退出。作为补充，还可以实现 --help 选项功能
* 验证输入，对派生值进行合理性检查。例如在执行 rm -f 路径，命令之前检查路径是否符合期望
* 返回有意义的退出码 0 代表成功，非 0 代表失败。没有必要为每一种失败形式都分配一个唯一的退出码，考虑到调用方真正想知道什么
* 为变量、脚本和函数名选择合适的命名规范。这些要符合的规范包括语言本身、站点的基础代码、当前项目中定义的其他变量和函数，其中最后一个十分重要，可以使用 字母下划线混合使用提高可读性。
* 给变量命名时，不仅要反应所存储的值，还要保持简洁。number_of_lines_of_input 不如 n_lines
* 考虑编写一套编码风格指南，以便你和你的同事能够按照同样的规范编写代码。指南可以让大家更好的阅读代码
* 每个脚本开头都加上一段注释，说明脚本的用途以及所接受的参数，你的名字，编写日期，如果脚本使用要求系统中的非标准工具、库或模块也要说明。
* 应当保证一两个月后阅读代码，留下的注释可以理解。注释书写建议：所选择的算法、用到的 web 参考页面、为什么不使用其他更显而易见的方法、不常见的代码流程、开发过程中遇到的问题。
* 不要堆砌带有无用注释的代码，要假定代码阅读人员的理解能力不差而且熟悉该语言。
* 以 root 什么运行脚本没有问题，但不要为脚本设置 setuid， 完全保证 setuid 脚本的安全性不是件容易的事。应该使用 sudo 完成访问控制策略
* 自己不明白的地方就不要写代码。管理员经常会浏览脚本，将其视为如何处理特定过程的权威文档。不要去散布哪些不成熟的脚本，误导他人。
* 可以随意改造自己的脚本已满足自己的需要。但如果你不理解代码的含义，不要陷入复制，粘贴祷告正常运行的情况。花些时间把代码缕清。这些时间绝不会白浪费。
* 通过 bash 选项，使用 -x 选项以在执行命令之前回显命令，使用 -n 选项可以在不执行命令的情况下检查命令的语法
